# API Plates

## Описание

Этот API предназначен для замены номерного знака автомобиля на изображении. Он принимает два изображения: изображение автомобиля и изображение номерного знака, который нужно использовать для замены. API использует модель YOLOv8 для обнаружения номерного знака на изображении автомобиля и заменяет его предоставленным изображением номерного знака.

## Эндпоинт

```http
POST http://5.181.108.209:7000/process_image
```

# API: Замена номерного знака автомобиля

## Параметры запроса

- Тип запроса: `multipart/form-data`
- Ключ: `car_image`
- Значение: Файл изображения автомобиля (png, jpg, jpeg, webp)
- Ключ: `car_plate`
- Значение: Файл изображения номерного знака (png, jpg, jpeg, webp)

### Среднее время ответа: 350ms

## Пример запроса (с использованием curl)

```bash
curl -X POST -F car_image=@car.jpg -F car_plate=@plate.png http://localhost:5000/process_image
```

## Формат ответа

- Успешный ответ: Возвращает обработанное изображение в формате JPEG с кодом состояния 200.
- Ошибка: Возвращает JSON объект с описанием ошибки и кодом состояния 400, 404 или 500.

## Примеры ответов

### Успешный ответ

```
HTTP/1.1 200 OK
Content-Type: image/jpeg
... (binary data of the processed image) ...
```

### Ошибка: Отсутствуют необходимые файлы

```json
HTTP/1.1 400 BAD REQUEST
Content-Type: application/json
{
  "error": "Both car_image and car_plate are required"
}
```

### Ошибка: Неверный тип файла

```json
HTTP/1.1 400 BAD REQUEST
Content-Type: application/json
{
  "error": "Invalid file type"
}
```

### Ошибка: Номерной знак не обнаружен

```json
HTTP/1.1 404 NOT FOUND
Content-Type: application/json
{
  "error": "No car plate detected"
}
```

### Ошибка: Внутренняя ошибка сервера

```json
HTTP/1.1 500 INTERNAL SERVER ERROR
Content-Type: application/json
{
  "error": "... (description of the error) ..."
}
```

## Примечания

- API использует модель YOLOv8 для обнаружения номерного знака.
- API поддерживает форматы изображений PNG, JPG, JPEG и WEBP.
- API применяет алгоритм CLAHE для улучшения контрастности изображения перед обнаружением номерного знака.
- API использует плавную маску для более реалистичной замены номерного знака.
- API может быть запущен локально с помощью команды `python app.py`.
- Параметр `debug=True` в `app.run()` позволяет запускать приложение в режиме отладки.
- Параметр `host='0.0.0.0'` позволяет получить доступ к API с других устройств в локальной сети.
